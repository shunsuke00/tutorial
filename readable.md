# 1. 表面上の改善

## 1-1. 命名規則

## 1-2. 改行と整列

## 1-3. コメント
コメントは画面（あるいは行数）を占領する代わりに、コードを理解する時間を短くするという価値を持たせる必要がある。
重要なことは

- [コードからすぐにわかることや補足的なコメントをしない](#コードからすぐにわかることや補足的なコメントをしない)
- [コードの欠陥に「TODO:」や「XXX:」などのコメントをつける](#コードの欠陥に「TODO:」や「XXX:」などのコメントをつける)
- [コードを見た人が疑問・驚きを抱きそうなところにコメントをする](#コードを見た人が疑問・驚きを抱きそうなところにコメントをする)
- [全体像についてのコメントをする](#全体像についてのコメントをする)
- [曖昧な代名詞を避ける](#曖昧な代名詞を避ける)
- [関数の動作を正確に記述する](#関数の動作を正確に記述する)
- [入出力の実例（コーナーケースを含む）をつける](#入出力の実例（コーナーケースを含む）をつける)
- わかりにくい引数にインラインコメントをつける
- 情報密度を高くする

<br>

### コードからすぐにわかることや補足的なコメントをしない
以下はダメな例。
```Javascript
// profitに新たな値を設定する
function Substitute(input) {
    profit = input;
}
```
（命名規則など）コードを改善することで「優れたコード > ひどいコード+コメント」↓
```Javascript
function SetProfit(profit_) {
    profit = profit_;
}
```
<br>

### コードの欠陥に「TODO:」や「XXX:」などのコメントをつける
未完成な部分や欠陥が存在する部分はコメントを残しておくべき。
よく用いられる記法は

| 記法          | 意味 |
| ----         | ---- |
| ```TODO:```  | あとで手をつける |
| ```FIXME:``` | 既知の欠陥があるコード |
| ```HACK:``` | あまり綺麗じゃない解決策 |
| ```XXX:``` | 大きな問題がある |

他にも大文字と小文字で、問題の重要度を表現したりするのも効果的。

<br>

### コードを見た人が疑問・驚きを抱きそうなところにコメントをする
例えばわざと遅い処理を採用していたり、コードを見た人が？？？となりそうな部分には、その疑問に対する回答をコメントとして残しておくべき。

また関数の実行に長い時間が必要になるなど、その仕様を知らないまま使って後から！？！？となりそうな部分には、最初にその仕様をコメントで知らせておくべき。

<br>

### 全体像についてのコメントをする
新しくチームに参加した人にあなたのコードを渡すとして、その人がコード（あるいは特定のファイル）を読み始める時にあなたは何か口頭で伝えるか？
伝えるならその内容をコメントで書くべき。
この要約コメントを書くべきなのは

- ファイルについて
- 関数について
- 関数内部の大きな塊について

など。ファイル構造や読む順序を伝えたければ READEME も有用。

<br>

### 曖昧な代名詞を避ける
```Javascript
// 引数を配列に追加し、そのサイズを調べる
```
このコメントでは「その」が引数と配列のどちらを指しているのか曖昧（ちなみに「サイズ」も曖昧）で、以下のように代名詞を避けて明確にするべき
```Javascript
// 引数を配列に追加し、追加後の配列の要素数を調べる
```
※この程度の簡単な処理であれば、本来コメントは不要

<br>

### 関数の動作を正確に記述する
```Javascript
// このファイルに含まれる行数を返す
function CountLines(filename) {...}
```
このコメントでは「行数」が複数の意味を持つため、処理を正確に記述するべき↓
```Javascript
// このファイルに含まれる改行文字('\n')を数える
function CountLines(filename) {...}
```

<br>

### 入出力の実例（コーナーケースを含む）をつける
コーナーケースを含む関数の処理を可視化できる実例を添えると良い。
こうすることで細かい仕様を短く伝えることが可能になるかも。
```Javascript
// 'src'の先頭や末尾にある'charsを除去する
// 実例：Strip("abba/a/ba", "ab")は"/a/"を返す
function Strip(src, chars) {...}
```